<!--This is the part for each article showing in the exhibition session-->
<!DOCTYPE html>
<html>

<head>
    <title><%= name%>-<%= title %></title>
    <link rel='stylesheet' href='/stylesheets/bootstrap.css' />



    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="/stylesheets/demo.css">
    <style type="text/css">
        /*below is the template used for showing each picture and paragrapgh*/
        .main-timeline{
            overflow: hidden;
            position: relative;
        }
        .main-timeline .timeline{
            position: relative;
            margin-top: -79px;
        }
        .main-timeline .timeline:first-child{ margin-top: 0; }
        .main-timeline .timeline:before,
        .main-timeline .timeline:after{
            content: "";
            display: block;
            width: 100%;
            clear: both;
        }
        .main-timeline .timeline:before{
            content: "";
            width: 100%;
            height: 100%;
            box-shadow: -8px 0 5px -5px rgba(0, 0, 0, 0.5) inset;
            position: absolute;
            top: 0;
            right: 0;
            z-index: 2;
        }
        .main-timeline .timeline-icon{
            width: 210px;
            height: 210px;
            border-radius: 50%;
            border: 25px solid transparent;
            border-top-color: #f4e277;
            border-right-color: #f4e277;
            margin: auto;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            z-index: 1;
            transform: rotate(45deg);
        }
        .main-timeline .year{
            display: block;
            width: 110px;
            height: 110px;
            line-height: 110px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.4);
            margin: auto;
            font-size: 30px;
            font-weight: bold;
            color: #f4e277;
            text-align: center;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            transform: rotate(-45deg);
        }
        .main-timeline .timeline-content{
            width: 35%;
            float: right;
            background: #f4e277;
            padding: 30px 20px;
            margin: 50px 0;
            z-index: 1;
            position: relative;
        }
        .main-timeline .timeline-content:before{
            content: "";
            width: 20%;
            height: 15px;
            background: #f4e277;
            position: absolute;
            top: 50%;
            left: -20%;
            z-index: -1;
            transform: translateY(-50%);
        }
        .main-timeline .title{
            font-size: 20px;
            font-weight: bold;
            color: #fff;
            margin: 0 0 10px 0;
        }
        .main-timeline .description{
            font-size: 16px;
            color: #fff;
            line-height: 24px;
            margin: 0;
        }
        .main-timeline .timeline:nth-child(2n):before{ box-shadow: 8px 0 5px -5px rgba(0, 0, 0, 0.5) inset; }
        .main-timeline .timeline:nth-child(2n) .timeline-icon{ transform: rotate(-135deg); }
        .main-timeline .timeline:nth-child(2n) .year{ transform: rotate(135deg); }
        .main-timeline .timeline:nth-child(2n) .timeline-content{ float: left; }
        .main-timeline .timeline:nth-child(2n) .timeline-content:before{
            left: auto;
            right: -20%;
        }
        .main-timeline .timeline:nth-child(2n) .timeline-icon{
            border-top-color: #FFCC00;
            border-right-color: #FFCC00;
        }
        .main-timeline .timeline:nth-child(2n) .year{ color: #FFCC00; }
        .main-timeline .timeline:nth-child(2n) .timeline-content,
        .main-timeline .timeline:nth-child(2n) .timeline-content:before{ background: #FFCC00; }
        .main-timeline .timeline:nth-child(3n) .timeline-icon{
            border-top-color: #AFDDAA;
            border-right-color: #AFDDAA;
        }
        .main-timeline .timeline:nth-child(3n) .year{ color: #AFDDAA; }
        .main-timeline .timeline:nth-child(3n) .timeline-content,
        .main-timeline .timeline:nth-child(3n) .timeline-content:before{ background: #AFDDAA; }
        .main-timeline .timeline:nth-child(4n) .timeline-icon{
            border-top-color: #55bbee;
            border-right-color: #55bbee;
        }
        .main-timeline .timeline:nth-child(4n) .year{ color: #55bbee; }
        .main-timeline .timeline:nth-child(4n) .timeline-content,
        .main-timeline .timeline:nth-child(4n) .timeline-content:before{ background: #55bbee; }
        @media only screen and (max-width: 1199px){
            .main-timeline .timeline{ margin-top: -103px; }
            .main-timeline .timeline-content:before{ left: -18%; }
            .main-timeline .timeline:nth-child(2n) .timeline-content:before{ right: -18%; }
        }
        @media only screen and (max-width: 990px){
            .main-timeline .timeline{ margin-top: -127px; }
            .main-timeline .timeline-content:before{ left: -2%; }
            .main-timeline .timeline:nth-child(2n) .timeline-content:before{ right: -2%; }
        }
        @media only screen and (max-width: 767px){
            .main-timeline .timeline{
                margin-top: 0;
                overflow: hidden;
            }
            .main-timeline .timeline:before,
            .main-timeline .timeline:nth-child(2n):before{
                box-shadow: none;
            }
            .main-timeline .timeline-icon,
            .main-timeline .timeline:nth-child(2n) .timeline-icon{
                margin-top: -30px;
                margin-bottom: 20px;
                position: relative;
                transform: rotate(135deg);
            }
            .main-timeline .year,
            .main-timeline .timeline:nth-child(2n) .year{ transform: rotate(-135deg); }
            .main-timeline .timeline-content,
            .main-timeline .timeline:nth-child(2n) .timeline-content{
                width: 100%;
                float: none;
                border-radius: 0 0 20px 20px;
                text-align: center;
                padding: 25px 20px;
                margin: 0 auto;
            }
            .main-timeline .timeline-content:before,
            .main-timeline .timeline:nth-child(2n) .timeline-content:before{
                width: 15px;
                height: 25px;
                position: absolute;
                top: -22px;
                left: 50%;
                z-index: -1;
                transform: translate(-50%,0);
            }
        }
    </style>



</head>

<% include ../header.ejs %>

<body background="../images/background7.jpg" style="background-size:100% 500px">
<div class="container-fluid" style="color:#773300;font-family:'Comic Sans MS';padding-top:10px;text-align:center;height:200px;background-image:url('../../images/posttop.jpg');background-size:100% 100%;">
    <br><h1><%= article.articlename%></h1>
    <form method="post" id = 'form'>
        <input style="display: none" id="author" name="author">
    <h2 href="#" id ="<%= article.authorname%>" onclick="enterpage(this)"><img style="height:70px;width:70px" src="../profileimgs/<%=article.authorname%>"><br><%= article.authorname%></h2>
    </form>
</div>


<div class="demo" style="min-height:500px;margin-bottom:100px;">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="main-timeline" style="padding-top: 250px">
                    <% for (var i = 0; i < article.parano; i++) { %>
                    <div class="timeline" style="margin-top:-220px">
                        <div class="timeline-icon"><span class="year"><%= i+1 %></span></div>
                        <div class="timeline-content" style="text-align:center;">
                            <img src="<%= '../exhibitionSec/pictures/' + (article.parastart + i) %>" style="width:315px;height:270px">
                            <p class="description">
                                <iframe src="<%= '../exhibitionSec/texts/' + (article.parastart + i) + '.txt' %>" style="border: none" id="<%= 'frame' + i%>"></iframe>
                            </p>
                        </div>
                    </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
    <br><br><br><br><br><br>
    <form method="post" id="likeform" style="margin-left:80%">
        <input style="display: none" id="likeinput" name="operation">
        <% if (liked){ %>
            <button id="unlike" style="background-color: #F5D777" onclick="like_operation(this)">Unlike!</button>
        <% } else{ %>
            <button id="like" style="background-color: #F5D777" onclick="like_operation(this)">Like!</button>
        <% } %>
    </form>
</div>

<!--a dynamic number of paragraphs is used here for a flexible display-->
<%if (comment){ %>
    <% for (var i = 0; i < comment.length; i++) { %>
        <div class="card w-75 mx-auto" style="background-color: #F5D777">
            <div class="card-header">
                From <a class="font-weight-bold"><%= comment[i].authorname %></a>:
            </div>
            <div class="card-body">
                <img src="<%= '../profileimgs/'+ comment[i].authorname%>" style="float: left; width: 150px;">
                <div class="card-text" style="margin-left: 200px">
                    <p style="color:#773300"><%= comment[i].content %></p>
                </div>
            </div>
        </div>
    <br>
    <% }
}%>

<form class="mx-auto w-75" style="margin-bottom:100px;" method="post">
    <br><label>Leave your comment:</label>
    <br><textarea type="text" name = "comment" class="mx-auto w-100" style="height: 100px"></textarea>
    <br><button type="submit" class="btn btn-warning btn-right" style="color:#000000;margin-left:90%;float: right">Submit</button>
</form>

<% include ../cprt.ejs %>
</body>

<script>
    function like_operation(button) {
        new Promise(function (resolve, reject) {
            var form = document.getElementById('likeform');
            document.getElementById('likeinput').value = button.id;
            resolve();
        }).then(function () {
            form.submit();
        })
    }
    function enterpage(user) {
        var author = document.getElementById('author');
        author.value = user.id;
        document.getElementById('form').submit();
    }

</script>

</html>